<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Raycaster</title>
    <!-- <script
          src="https://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"></script>-->
</head>
<body scroll="no" style="overflow: hidden">
    <canvas id="screen"></canvas>
    <canvas id="test"></canvas>
    <canvas id="minimap"></canvas>

    <script src="./globals.js"></script>
    <script src="./game_engine/explore.js"></script>
    <script src="./raycasting_engine/raycasting.js"></script>
    <script src="./raycasting_engine/draw.js"></script>
    <script src="./ui/ui.js"></script>

    <script>
        /* On document loaded */
        document.addEventListener("DOMContentLoaded", function(){
            MapWidth = Map[0].length;
            MapHeight = Map.length;

            screenInit();
            Explore.bindKeys();
            gameCycle();
        }, false);

        function screenInit(){
            var screen_canvas = document.getElementById("screen");
            screen_canvas.width = ScreenWidth * ScreenScale;
            screen_canvas.height = ScreenHeight * ScreenScale;
        }

        var player = {
            x : 1,
            y : 2,
            dir : 0, //turning direction, left or right
            speed : 0, //forward -> 1, backwards -> -1
            rot : 0, // angle of rotation
            moveRate : 0.18,
            rotRate : 6 * Math.PI/180 //rate of rotation
        }

        function gameCycle(){

            Explore.cycle();

            Minimap.draw();
            Raycaster.castRays();
            Screen.draw();

            setTimeout(gameCycle, 1000/30); //30 Frames babyyy
        }

    </script>
</body>
</html>
